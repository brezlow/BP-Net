# 测距数据集使用说明

本测距数据集目标在于补全稀疏的激光雷达距离图。本文档提供了该数据集的：输入输出的数据格式，如何使用数据以及目标任务。

## 目录

1. [数据集概览](##数据集概览)
2. [数据格式](##数据格式)
   - [输入](###输入)
   - [标签（输出）](###标签（输出）)
3. [数据使用](##数据使用)
4. [目标任务](##目标任务)

## 数据集概览

测距数据集包含：

- 激光雷达测得的稀疏距离图
- 标注过的稠密距离图

目标是根据稀疏距离图（输入）预测出稠密距离图（输出）。

## 数据格式

**文件结构示意:**

```
dataset/
    ├── train/
    │   ├── groundtruth/
    │   │   ├── 000001.png
    │   │   ├── ...
    │   │   ├── 075000.png
    │   └── raw_data/
    │       ├── 000001.png
    │       ├── ...
    └── val/
```

### 输入

输入的**稀疏距离图**放在`raw_data`文件夹下 ，为24位三通道PNG图像，每个像素点的距离信通过按有效为由高至低的顺序拼接三个通道（R, G, B)，并将结果视为无符号整数得到。距离信息相较于以米为单位的真实距离经过了一定比例缩放，视为统一采用特定单位即可。

### 标签（输出）

输入对应的标签存储在` groundtruth `文件夹中，为标注过的**稠密距离图**，格式与输入相同。

## 数据使用

下面的伪码展示如何从图像中提取距离值。大家可以用自己熟悉的编程工具来实现。

```
注：标签数据使用方法类似。

image_path = 'dataset/train/raw_data/000001.png'
rgb_image = image_read(image_path)
R, G, B = split_channels(rgb_image)
distance_map = ((R << 16) | (G << 8) | B).as(unsigned_int)
```

## 目标任务

目标任务是从稀疏距离图生成稠密距离图。输出 $Y'(h, w, c)$ 显然应当和输入 $X(h, w, c)$ 以及标签 $Y(h, w, c)$ 维度相同，其中 $h$ 代表像素点所在高度，$w$ 代表像素点所在宽度，$c$ 代表像素点所在通道。下面平方误差为例展示了处理此数据集的目标，但注意处理该数据集时目标函数并不要求是MSE，而是可以自行决定，平方误差仅在这里用作示例：
$$
目标=最小化(误差)\\
Y'(h,w,c) = 以自己的方法处理X(h,w,c)\\
误差 =\sum_h \sum_w \sum_c (Y(h,w,c)-Y'(h,w,c))^2
$$

测距数据集参考说明，可参考kitti数据集以下链接，但不是这个数据集，真正数据集还是参考张老师发的百度网盘上的数据集：
https://www.cvlibs.net/datasets/kitti/eval_depth.php?benchmark=depth_completion


